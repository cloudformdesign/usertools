<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="generator" content="http://www.nongnu.org/elyxer/"/>
<meta name="create-date" content="2013-12-16"/>
<link rel="stylesheet" href="http://elyxer.nongnu.org/lyx.css" type="text/css" media="all"/>
<title>Converted document</title>
</head>
<body>
<div id="globalWrapper">
<h1 class="title">
<b>Threading</b>
</h1>
<h2 class="author">
Garrett Berg, Cloudform Design, garrett@cloudformdesign.com
</h2>
<div class="Standard">
<b>LICENSE: </b>This library is released under the FreeBSD License, if you need a copy go to:<a class="URL" href=" http://www.freebsd.org/copyright/freebsd-license.html"> http://www.freebsd.org/copyright/freebsd-license.html</a>
</div>
<div class="Standard">
<b>Copyright: </b>Garrett Berg <a class="URL" href="cloudformdesign.com">cloudformdesign.com</a>, <a class="URL" href="garrett@cloudformdesign.com">garrett@cloudformdesign.com</a>
</div>
<h1 class="Section-">
<a class="toc" name="toc-Section--1"></a>Summary
</h1>
<div class="Standard">
The threading.h library was created to make threading simpler for microcontrollers, while still using a very small footprint. It is integrated with the User Interface library (&ldquo;ui.h&rdquo;), and it is recommended that you use that library instead of this one for simple projects, as it will provide a full user interface through the terminal.
</div>
<h2 class="Subsection-">
<a class="toc" name="toc-Subsection--1"></a>Overview
</h2>
<ul>
<li>
<b>threading_loop() ::</b><ul>
<li>
This should be called in your loop function. It is what checks to see if there is new input and if any threads need to be run.
</li>
<li>
If you are using the ui.h module, call <b>ui_loop()</b> instead
</li>

</ul>

</li>
<li>
<b>ui_expose_variable(&ldquo;var_name&rdquo;, variable) ::</b><ul>
<li>
This exposes a variable. All the user has to do to read that variable is type &ldquo;?v var_name&rdquo; + LINE_FEED and the value in hex will be printed out.
</li>

</ul>

</li>
<li>
<b>ui_expose_function(&ldquo;func_name&rdquo;, function) ::</b><ul>
<li>
This exposes a function. If the user types &ldquo;func_name input1 input2&rdquo; + LINE_FEED the function will be called and sent &ldquo;input1 input2&rdquo;
</li>
<li>
The function must be of type &ldquo;void function(char *input)&rdquo;
</li>

</ul>

</li>
<li>
<b>ui_expose_thread(&ldquo;thread_name&rdquo;, thread_function) ::</b><ul>
<li>
This exposes a thread. If the user types &ldquo;thread_name input1 input2&rdquo; + LINE_FEED the function will be called and sent &ldquo;input1 input2&rdquo;
</li>
<li>
the function must be of type &ldquo;PT_THREAD thread_function(pthread *pt, char *input)&rdquo;
</li>

</ul>

</li>
<li>
<b>call_name(name, input) ::</b><ul>
<li>
calls the exposed thread or function of the specified name.
</li>

</ul>

</li>
<li>
<b>schedule_thread(name, function) ::</b><ul>
<li>
both exposes and calls the thread (do not use if you have already exposed the thread as it will duplicate it)
</li>

</ul>

</li>
<li>
<b>thread_setup(num_vars, num_functions, num_threads) ::</b><ul>
<li>
Must be called in the <b>setup</b>Â function, before any threads are exposed or called. You must keep track of the number of variables, functions, and threads you use and input them. The number can be higher than what you actually use (but uses more memory).
</li>
<li>
If you are using the ui.h module, use <b>ui_setup(V, F, T) </b>instead
</li>

</ul>

</li>

</ul>
<h2 class="Subsection-">
<a class="toc" name="toc-Subsection--2"></a>Threading
</h2>
<div class="Standard">
This module supports threading through the <i>protothreads</i> library. Each function has an associated thread that can be called. This library can make it significantly easier to manage multiple processes with the run_thread(name, function) call. See the <b>threading_ex </b>in the documentation for examples. Also see <b>README_pt.txt </b>for information on how to use protothreads.
</div>

<hr class="footer"/>
<div class="footer" id="generated-by">
Document generated by <a href="http://elyxer.nongnu.org/">eLyXer 1.2.3 (2011-08-31)</a> on <span class="create-date">2013-12-16T12:29:26.045469</span>
</div>
</div>
</body>
</html>
